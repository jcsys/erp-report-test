<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8" />
	<script src="https://code.jquery.com/jquery-3.4.1.slim.js"></script>
	<script src='js/pdfmake.min.js'></script>
	<script src='js/Roboto-Italic.ttf.js'></script>
	<script src='js/Roboto-Medium.ttf.js'></script>
	<script src='js/Roboto-MediumItalic.ttf.js'></script>
	<script src='js/Roboto-Regular.ttf.js'></script>
	<script src='js/ipag.ttf.js'></script>
	<script src='js/ipagp.ttf.js'></script>
	<script src='js/ipam.ttf.js'></script>
	<script src='js/ipamp.ttf.js'></script>
	<script src='js/GenShinGothic-Normal.ttf.js'></script>
	<script src='js/GenShinGothic-Bold.ttf.js'></script>
	<script src='js/GenShinGothic-Monospace-Normal.ttf.js'></script>
	<script src='js/GenShinGothic-Monospace-Bold.ttf.js'></script>
	<script src='js/GenShinGothic-P-Normal.ttf.js'></script>
	<script src='js/GenShinGothic-P-Bold.ttf.js'></script>
	<title>PDF Report Test</title>
	<script>
		function createPdf() {
			if (pdfMake.vfs === undefined) {
				pdfMake.vfs = window.vfs
			}

			if (pdfMake.fonts === undefined) {
				pdfMake.fonts = {
					Roboto: {
						normal: 'Roboto-Regular.ttf',
						bold: 'Roboto-Medium.ttf',
						italics: 'Roboto-Italic.ttf',
						bolditalics: 'Roboto-MediumItalic.ttf',
					},
					ipag: {
						normal: 'ipag.ttf',
						bold: 'ipag.ttf',
						italics: 'ipag.ttf',
						bolditalics: 'ipag.ttf',
					},
					ipagp: {
						normal: 'ipagp.ttf',
						bold: 'ipagp.ttf',
						italics: 'ipagp.ttf',
						bolditalics: 'ipagp.ttf',
					},
					ipam: {
						normal: 'ipam.ttf',
						bold: 'ipam.ttf',
						italics: 'ipam.ttf',
						bolditalics: 'ipam.ttf',
					},
					ipamp: {
						normal: 'ipamp.ttf',
						bold: 'ipamp.ttf',
						italics: 'ipamp.ttf',
						bolditalics: 'ipamp.ttf',
					},
					GenShinGothic: {
						normal: 'GenShinGothic-Normal.ttf',
						bold: 'GenShinGothic-Bold.ttf',
						italics: 'GenShinGothic-Normal.ttf',
						bolditalics: 'GenShinGothic-Bold.ttf',
					},
					GenShinGothicP: {
						normal: 'GenShinGothic-P-Normal.ttf',
						bold: 'GenShinGothic-P-Bold.ttf',
						italics: 'GenShinGothic-P-Normal.ttf',
						bolditalics: 'GenShinGothic-P-Bold.ttf',
					},
					GenShinGothicMono: {
						normal: 'GenShinGothic-Monospace-Normal.ttf',
						bold: 'GenShinGothic-Monospace-Bold.ttf',
						italics: 'GenShinGothic-Monospace-Normal.ttf',
						bolditalics: 'GenShinGothic-Monospace-Bold.ttf',
					}
				}
			}
			eval($('#pdfsrc').val())
			var pdfDoc = pdfMake.createPdf(dd)
			pdfDoc.getDataUrl((url) => { $("#pdfviewer").attr('src', url) }, pdfDoc)
		}
	</script>
	<style>
		html,
		body {
			margin: 0px;
			height: 100%;
		}

		#content {
			height: 100%;
			width: 100%;
		}

		#pdfsrc {
			height: 100%;
			width: 100%;
		}

		#pdfviewer {
			height: 100%;
			width: 100%;
		}
	</style>
</head>
<body>
	<table id="content">
		<tr style="height: 25px;">
			<td>
				<button onclick="createPdf()">导出PDF</button>
			</td>
			<td>
				<a href="http://pdfmake.org/playground.html" target="blank">PDFMaker参考</a>
			</td>
		</tr>
		<tr>
			<td style="width: 20%">
				<textarea id="pdfsrc" cols="30" rows="10">var dd = {
				content: [
					{
						stack: [
							{
								text:"日本語のテスト This is Japanese test!",
								font: "ipam"
							},
							{
								text:"日本語のテスト This is Japanese test!",
								font: "ipamp"
							},
							{
								text:"日本語のテスト This is Japanese test!",
								font: "ipag"
							},
							{
								text:"日本語のテスト This is Japanese test!",
								font: "ipagp"
							},
							{
								text:"日本語のテスト This is Japanese test!",
								font: "GenShinGothic"
							},
							{
								text:"日本語のテスト This is Japanese test!",
								font: "GenShinGothicP",
								bold:true
							},
							{
								text:"日本語のテスト This is Japanese test!",
								font: "GenShinGothicMono",
								bold:true
							},
						],
						style: 'header'
					}
				],
				defaultStyle: {
					font: 'GenShinGothic',
				},
			}</textarea>
			</td>
			<td style="width: 80%">
				<iframe id="pdfviewer" src="" frameborder="0"></iframe>
			</td>
		</tr>
	</table>
</body>
</html>